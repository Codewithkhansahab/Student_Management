<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Login</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    #bgVideo {
      position: fixed;
      top: 0;
      left: 0;
      min-width: 100%;
      min-height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    .custom-toast {
      background: linear-gradient(135deg, #6a11cb, #2575fc);
      color: white;
      border-radius: 12px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
      min-width: 320px;
    }

    .toast-body {
      font-size: 1rem;
      font-weight: 500;
    }
    @media screen and (max-width: 768px) {
  .custom-box {
    flex-direction: column;
    text-align: center;
  }
}

  </style>
</head>

<body class="bg-light d-flex align-items-center justify-content-center vh-100">
  <!-- Background Video -->
  <video autoplay muted loop playsinline id="bgVideo">
    <source src="/videos/background.mp4" type="video/mp4" />
    Your browser does not support the video tag.
  </video>

  <!-- Login Card -->
  <div class="card shadow p-4" style="width: 25rem;">
    <h2 class="mb-4 text-primary text-center">üéì Student Management</h2>
    <h3 class="text-center mb-4">üîê Login</h3>

    <form method="post" action="/loginHome">
      <input type="email" name="email" class="form-control mb-3" placeholder="Email" required />
      <input type="password" name="password" class="form-control mb-3" placeholder="Password" required />
      <button type="submit" class="btn btn-primary w-100">Login</button>
    </form>

    <div class="mt-3 text-center">
      <a href="/registerPage">Don't have an account? Register</a><br />
      <a href="/forgot" class="text-danger">Forgot Password?</a>
    </div>
  </div>
  
  <% if (toast === 'registered' || toast === 'invalid') { %>
    <div class="position-fixed top-0 start-50 translate-middle-x mt-4" style="z-index: 1055;">
      <div id="myToast" class="toast custom-toast" role="alert" aria-live="assertive" aria-atomic="true"
      data-bs-delay="3000" data-bs-autohide="true">
      <div class="d-flex align-items-center px-3 py-2">
        <div class="toast-body">
          <% if (toast === 'registered') { %>
            ‚úÖ Registration successful!
            <% } else if (toast === 'invalid') { %>
              ‚ùå Invalid login credentials!
              <% } %>
            </div>
            <button type="button" class="btn-close btn-close-white ms-3" data-bs-dismiss="toast" aria-label="Close"></button>
          </div>
        </div>
      </div>
      <% } %>
      
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  window.addEventListener('load', () => {
    const toastEl = document.getElementById('myToast');
    if (toastEl) {
      const toast = new bootstrap.Toast(toastEl);
      toast.show();
    }
  });

      // Clean the URL
      if (window.location.search.includes("toast=registered")) {
        const newUrl = window.location.origin + window.location.pathname;
        window.history.replaceState({}, document.title, newUrl);
      }
  </script>
</body>
</html>
